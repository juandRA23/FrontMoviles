<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FrontMoviles.DetalleServicioPage"
             Title="Detalle del Servicio"
             BackgroundColor="White"
             NavigationPage.HasNavigationBar="False">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" BackgroundColor="#4A7C59" Padding="20,50,20,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Botón regresar -->
            <Button Grid.Column="0" 
                    Text="←"
                    FontSize="24"
                    BackgroundColor="Transparent"
                    TextColor="White"
                    WidthRequest="40"
                    HeightRequest="40"
                    Clicked="OnBackClicked" />

            <!-- Título -->
            <Label Grid.Column="1" 
                   Text="Detalle del Servicio"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="White"
                   HorizontalOptions="Center"
                   VerticalOptions="Center" />

            <!-- Botón compartir -->
            <Button Grid.Column="2" 
                    Text="📤"
                    FontSize="18"
                    BackgroundColor="Transparent"
                    TextColor="White"
                    WidthRequest="40"
                    HeightRequest="40"
                    Clicked="OnCompartirClicked" />
        </Grid>

        <!-- Contenido principal -->
        <ScrollView Grid.Row="1">
            <StackLayout Spacing="0">

                <!-- Header del servicio -->
                <Grid BackgroundColor="#F8F9FA" Padding="20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Icono del servicio -->
                    <Frame Grid.Column="0"
                           x:Name="IconoFrame"
                           BackgroundColor="#A8D5BA"
                           CornerRadius="15"
                           WidthRequest="70"
                           HeightRequest="70"
                           HasShadow="False"
                           Padding="0">
                        <Label x:Name="IconoLabel"
                               Text="🔧"
                               FontSize="32"
                               TextColor="White"
                               HorizontalOptions="Center"
                               VerticalOptions="Center" />
                    </Frame>

                    <!-- Información básica -->
                    <StackLayout Grid.Column="1" Spacing="5" Margin="15,0,0,0" VerticalOptions="Center">
                        <Label x:Name="CategoriaLabel"
                               Text="CATEGORÍA"
                               FontSize="12"
                               TextColor="#4A90A4"
                               FontAttributes="Bold" />

                        <Label x:Name="TituloLabel"
                               Text="Título del Servicio"
                               FontSize="20"
                               TextColor="Black"
                               FontAttributes="Bold"
                               LineBreakMode="WordWrap" />

                        <StackLayout Orientation="Horizontal" Spacing="5">
                            <Label Text="⭐"
                                   FontSize="16"
                                   VerticalOptions="Center" />
                            <Label x:Name="CalificacionLabel"
                                   Text="4.8"
                                   FontSize="14"
                                   TextColor="Black"
                                   FontAttributes="Bold"
                                   VerticalOptions="Center" />
                            <Label x:Name="ResenasLabel"
                                   Text="(23 reseñas)"
                                   FontSize="12"
                                   TextColor="Gray"
                                   VerticalOptions="Center" />
                        </StackLayout>
                    </StackLayout>

                    <!-- Precio -->
                    <StackLayout Grid.Column="2" HorizontalOptions="End" VerticalOptions="Center">
                        <Label x:Name="PrecioLabel"
                               Text="₡15,000"
                               FontSize="24"
                               TextColor="#4A7C59"
                               FontAttributes="Bold"
                               HorizontalOptions="End" />
                        <Label Text="por hora"
                               FontSize="12"
                               TextColor="Gray"
                               HorizontalOptions="End" />
                    </StackLayout>
                </Grid>

                <!-- Contenido detallado -->
                <StackLayout BackgroundColor="White" Spacing="25" Padding="20,25">

                    <!-- Descripción -->
                    <StackLayout Spacing="10">
                        <Label Text="Descripción" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="Black" />

                        <Frame BackgroundColor="#F8F9FA" CornerRadius="10" HasShadow="False" Padding="15">
                            <Label x:Name="DescripcionLabel"
                                   Text="Descripción completa del servicio..."
                                   FontSize="14"
                                   TextColor="Black"
                                   LineBreakMode="WordWrap" />
                        </Frame>
                    </StackLayout>

                    <!-- Disponibilidad -->
                    <StackLayout Spacing="10">
                        <Label Text="Disponibilidad" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="Black" />

                        <Frame BackgroundColor="#E8F5E8" CornerRadius="10" HasShadow="False" Padding="15">
                            <StackLayout Orientation="Horizontal" Spacing="10">
                                <Label Text="🕒"
                                       FontSize="20"
                                       VerticalOptions="Center" />
                                <Label x:Name="DisponibilidadLabel"
                                       Text="Lunes a viernes 2-6 PM"
                                       FontSize="14"
                                       TextColor="Black"
                                       VerticalOptions="Center"
                                       LineBreakMode="WordWrap" />
                            </StackLayout>
                        </Frame>
                    </StackLayout>

                    <!-- Especialidades/Subcategorías -->
                    <StackLayout x:Name="SubcategoriasContainer" Spacing="10">
                        <Label Text="Especialidades" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="Black" />

                        <FlexLayout x:Name="SubcategoriasFlexLayout"
                                    Direction="Row"
                                    Wrap="Wrap"
                                    JustifyContent="Start"
                                    AlignItems="Start">
                            <!-- Las subcategorías se cargarán dinámicamente -->
                        </FlexLayout>
                    </StackLayout>

                    <!-- Información del proveedor -->
                    <StackLayout Spacing="15">
                        <Label Text="Sobre el proveedor" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="Black" />

                        <Frame BackgroundColor="White" 
                               CornerRadius="10" 
                               HasShadow="True"
                               Padding="15">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="60" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <!-- Avatar del proveedor -->
                                <Frame Grid.Column="0"
                                       BackgroundColor="#E0E0E0"
                                       CornerRadius="30"
                                       WidthRequest="60"
                                       HeightRequest="60"
                                       HasShadow="False"
                                       Padding="0">
                                    <Label Text="👤"
                                           FontSize="28"
                                           TextColor="Gray"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center" />
                                </Frame>

                                <!-- Información del proveedor -->
                                <StackLayout Grid.Column="1" Spacing="5" Margin="15,0,0,0" VerticalOptions="Center">
                                    <Label x:Name="NombreProveedorLabel"
                                           Text="Nombre del Proveedor"
                                           FontSize="16"
                                           TextColor="Black"
                                           FontAttributes="Bold" />

                                    <Label x:Name="UbicacionProveedorLabel"
                                           Text="San José, Costa Rica"
                                           FontSize="14"
                                           TextColor="Gray" />

                                    <StackLayout Orientation="Horizontal" Spacing="10">
                                        <StackLayout Orientation="Horizontal" Spacing="3">
                                            <Label Text="✅"
                                                   FontSize="12"
                                                   VerticalOptions="Center" />
                                            <Label x:Name="ServiciosCompletadosLabel"
                                                   Text="15 servicios"
                                                   FontSize="12"
                                                   TextColor="Gray"
                                                   VerticalOptions="Center" />
                                        </StackLayout>

                                        <StackLayout Orientation="Horizontal" Spacing="3">
                                            <Label Text="📅"
                                                   FontSize="12"
                                                   VerticalOptions="Center" />
                                            <Label x:Name="MiembroDesdLabel"
                                                   Text="Desde 2023"
                                                   FontSize="12"
                                                   TextColor="Gray"
                                                   VerticalOptions="Center" />
                                        </StackLayout>
                                    </StackLayout>
                                </StackLayout>

                                <!-- Botón ver perfil -->
                                <Button Grid.Column="2"
                                        Text="Ver perfil"
                                        BackgroundColor="Transparent"
                                        TextColor="#4A7C59"
                                        BorderColor="#4A7C59"
                                        BorderWidth="1"
                                        FontSize="12"
                                        CornerRadius="15"
                                        Padding="15,8"
                                        VerticalOptions="Center"
                                        Clicked="OnVerPerfilClicked" />
                            </Grid>
                        </Frame>
                    </StackLayout>

                    <!-- Información del servicio -->
                    <StackLayout Spacing="15">
                        <Label Text="Información del servicio" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="Black" />

                        <StackLayout Spacing="10">
                            <!-- Publicado -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Label Grid.Column="0"
                                       Text="📅 Publicado:"
                                       FontSize="14"
                                       TextColor="Gray"
                                       VerticalOptions="Center" />

                                <Label Grid.Column="1"
                                       x:Name="FechaPublicacionLabel"
                                       Text="Hace 2 días"
                                       FontSize="14"
                                       TextColor="Black"
                                       FontAttributes="Bold"
                                       HorizontalOptions="End"
                                       VerticalOptions="Center" />
                            </Grid>

                            <!-- Servicio ID -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Label Grid.Column="0"
                                       Text="🆔 ID del servicio:"
                                       FontSize="14"
                                       TextColor="Gray"
                                       VerticalOptions="Center" />

                                <Label Grid.Column="1"
                                       x:Name="ServicioIdLabel"
                                       Text="#12345"
                                       FontSize="14"
                                       TextColor="Black"
                                       FontAttributes="Bold"
                                       HorizontalOptions="End"
                                       VerticalOptions="Center" />
                            </Grid>

                            <!-- Categoría -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Label Grid.Column="0"
                                       Text="🏷️ Categoría:"
                                       FontSize="14"
                                       TextColor="Gray"
                                       VerticalOptions="Center" />

                                <Label Grid.Column="1"
                                       x:Name="CategoriaInfoLabel"
                                       Text="Educación"
                                       FontSize="14"
                                       TextColor="Black"
                                       FontAttributes="Bold"
                                       HorizontalOptions="End"
                                       VerticalOptions="Center" />
                            </Grid>
                        </StackLayout>
                    </StackLayout>

                    <!-- OPCIONES DE CONTACTO - VERSIÓN SIMPLE -->
                    <StackLayout Spacing="15">
                        <Label Text="Opciones de contacto" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="Black" />

                        <!-- Grid con 4 iconos -->
                        <Grid ColumnSpacing="20" RowSpacing="15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!-- WhatsApp -->
                            <StackLayout Grid.Column="0" HorizontalOptions="Center">
                                <Frame BackgroundColor="#25D366"
                                       CornerRadius="30"
                                       WidthRequest="60"
                                       HeightRequest="60"
                                       HasShadow="True"
                                       Padding="0">
                                    <Button Text="💬"
                                            FontSize="28"
                                            BackgroundColor="Transparent"
                                            TextColor="White"
                                            Clicked="OnWhatsAppClicked" />
                                </Frame>
                                <Label Text="WhatsApp"
                                       FontSize="12"
                                       TextColor="Black"
                                       HorizontalOptions="Center"
                                       FontAttributes="Bold" />
                            </StackLayout>

                            <!-- Email -->
                            <StackLayout Grid.Column="1" HorizontalOptions="Center">
                                <Frame BackgroundColor="#4A90E2"
                                       CornerRadius="30"
                                       WidthRequest="60"
                                       HeightRequest="60"
                                       HasShadow="True"
                                       Padding="0">
                                    <Button Text="📧"
                                            FontSize="28"
                                            BackgroundColor="Transparent"
                                            TextColor="White"
                                            Clicked="OnEmailClicked" />
                                </Frame>
                                <Label Text="Email"
                                       FontSize="12"
                                       TextColor="Black"
                                       HorizontalOptions="Center"
                                       FontAttributes="Bold" />
                            </StackLayout>

                            <!-- Llamada -->
                            <StackLayout Grid.Column="2" HorizontalOptions="Center">
                                <Frame BackgroundColor="#007AFF"
                                       CornerRadius="30"
                                       WidthRequest="60"
                                       HeightRequest="60"
                                       HasShadow="True"
                                       Padding="0">
                                    <Button Text="📞"
                                            FontSize="28"
                                            BackgroundColor="Transparent"
                                            TextColor="White"
                                            Clicked="OnLlamadaClicked" />
                                </Frame>
                                <Label Text="Llamar"
                                       FontSize="12"
                                       TextColor="Black"
                                       HorizontalOptions="Center"
                                       FontAttributes="Bold" />
                            </StackLayout>

                            <!-- Chat interno -->
                            <StackLayout Grid.Column="3" HorizontalOptions="Center">
                                <Frame BackgroundColor="#4A7C59"
                                       CornerRadius="30"
                                       WidthRequest="60"
                                       HeightRequest="60"
                                       HasShadow="True"
                                       Padding="0">
                                    <Button Text="💭"
                                            FontSize="28"
                                            BackgroundColor="Transparent"
                                            TextColor="White"
                                            Clicked="OnChatClicked" />
                                </Frame>
                                <Label Text="Chat"
                                       FontSize="12"
                                       TextColor="Black"
                                       HorizontalOptions="Center"
                                       FontAttributes="Bold" />
                            </StackLayout>
                        </Grid>
                    </StackLayout>

                    <!-- Espacio adicional -->
                    <BoxView HeightRequest="100" BackgroundColor="Transparent" />
                </StackLayout>
            </StackLayout>
        </ScrollView>

        <!-- Botón contratar -->
        <Grid Grid.Row="2" BackgroundColor="White" Padding="20,15,20,25">
            <Button x:Name="ContratarButton"
                    Text="🤝 Contratar Servicio"
                    BackgroundColor="#4A7C59"
                    TextColor="White"
                    FontSize="16"
                    FontAttributes="Bold"
                    HeightRequest="50"
                    CornerRadius="25"
                    Clicked="OnContratarClicked" />
        </Grid>
    </Grid>
</ContentPage>